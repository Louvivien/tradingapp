
> tradingapp_api@1.0.0 start
> node server.js

[Config] Loading environment variables from: /Users/vivienrichaud/Documents/tradingapp/server/config/.env
[Config] API Key Configuration:
[Config] - Paper Trading API Key ID: Set
[Config] - Paper Trading Secret Key: Set
[Config] - Live Trading API Key ID: Set
[Config] - Live Trading Secret Key: Set
[MongoDB] Initial readyState before connect | state=0 (disconnected)
[MongoDB] Event: connecting | state=2 (connecting)
[MongoDB] Event: connected | state=1 (connected)
[MongoDB] Connected to MongoDB
[MongoDB] Post-connect | state=1 (connected)
[Debug] Environment variables loaded:
[Debug] - Paper Key ID: PK5SX...
[Debug] - Paper Secret: OeC06...
[Debug] - Live Key ID: AKILU...
[Debug] - Live Secret: 6v68e...
[API Info] Paper trading keys are present
[API Info] Live trading key format is valid (starts with AK)
[API Info] Validating Paper trading keys at https://paper-api.alpaca.markets/v2/clock
[API Debug] Using key ID: PK5SX...
[API Info] Validating Live trading keys at https://api.alpaca.markets/v2/clock
[API Debug] Using key ID: AKILU...
[API Request] {
  method: 'GET',
  url: 'https://paper-api.alpaca.markets/v2/clock',
  headers: { 'APCA-API-KEY-ID': 'PK5SX...', 'APCA-API-SECRET-KEY': 'OeC06...' }
}
[API Request] {
  method: 'GET',
  url: 'https://api.alpaca.markets/v2/clock',
  headers: { 'APCA-API-KEY-ID': 'AKILU...', 'APCA-API-SECRET-KEY': '6v68e...' }
}
[API Response] {
  status: 200,
  statusText: 'OK',
  headers: Object [AxiosHeaders] {
    date: 'Wed, 05 Nov 2025 10:30:19 GMT',
    'content-type': 'application/json',
    'content-length': '119',
    connection: 'keep-alive',
    vary: 'Accept-Encoding',
    'x-ratelimit-limit': '200',
    'x-ratelimit-remaining': '199',
    'x-ratelimit-reset': '1762338619',
    'strict-transport-security': 'max-age=31536000; includeSubDomains',
    'x-request-id': '4434d220b5a8c822e6e46357a61c184a',
    'access-control-allow-origin': '*',
    'access-control-allow-credentials': 'true',
    'access-control-allow-methods': 'GET, OPTIONS',
    'access-control-allow-headers': 'Apca-Api-Key-Id, Apca-Api-Secret-Key, Authorization',
    'access-control-max-age': '1728000'
  }
}
[API Success] Paper trading keys validated successfully
[API Response] {
  status: 200,
  statusText: 'OK',
  headers: Object [AxiosHeaders] {
    date: 'Wed, 05 Nov 2025 10:30:19 GMT',
    'content-type': 'application/json',
    'content-length': '120',
    connection: 'keep-alive',
    vary: 'Accept-Encoding',
    'x-ratelimit-limit': '200',
    'x-ratelimit-remaining': '199',
    'x-ratelimit-reset': '1762338619',
    'strict-transport-security': 'max-age=31536000; includeSubDomains',
    'x-request-id': 'e9017692a051ad1b1ff6ee0f5d82a116',
    'access-control-allow-origin': '*',
    'access-control-allow-credentials': 'true',
    'access-control-allow-methods': 'GET, OPTIONS',
    'access-control-allow-headers': 'Apca-Api-Key-Id, Apca-Api-Secret-Key, Authorization',
    'access-control-max-age': '1728000'
  }
}
[API Success] Live trading keys validated successfully
[API Info] Final configuration:
[API Info] - Paper trading keys valid: true
[API Info] - Live trading keys valid: true
[API Info] - Trading API URL: https://paper-api.alpaca.markets
[API Info] - Data API URL: https://data.alpaca.markets
[API Info] Using paper trading keys for trading operations
[API Info] Using paper trading keys for trading operations
[API] Initializing Alpaca client with paper trading keys
[API] Using base URL: https://paper-api.alpaca.markets
[API] Using data URL: https://data.alpaca.markets
[API Request] {
  method: 'GET',
  url: 'https://paper-api.alpaca.markets/v2/account',
  headers: { 'APCA-API-KEY-ID': 'PK5SX...', 'APCA-API-SECRET-KEY': 'OeC06...' }
}
[API Response] {
  status: 200,
  statusText: 'OK',
  headers: Object [AxiosHeaders] {
    date: 'Wed, 05 Nov 2025 10:30:19 GMT',
    'content-type': 'application/json; charset=UTF-8',
    'transfer-encoding': 'chunked',
    connection: 'keep-alive',
    vary: 'Accept-Encoding, Origin',
    'access-control-allow-origin': '*',
    'x-ratelimit-limit': '200',
    'x-ratelimit-remaining': '199',
    'x-ratelimit-reset': '1762338619',
    'x-request-id': 'e0d703b0e9ea1dff8c9881ba0f084f99',
    'strict-transport-security': 'max-age=31536000; includeSubDomains',
    'access-control-allow-credentials': 'true',
    'access-control-allow-methods': 'GET, OPTIONS, PUT, DELETE, POST, PATCH',
    'access-control-allow-headers': 'Apca-Api-Key-Id, Apca-Api-Secret-Key, Authorization, Content-Type, X-Correspondent',
    'access-control-max-age': '1728000'
  }
}
[API Success] Connected to Alpaca API. Account status: ACTIVE
node:events:497
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::3000
    at Server.setupListenHandle [as _listen2] (node:net:1904:16)
    at listenInCluster (node:net:1961:12)
    at Server.listen (node:net:2063:7)
    at Function.listen (/Users/vivienrichaud/Documents/tradingapp/server/node_modules/express/lib/application.js:635:24)
    at startServer (/Users/vivienrichaud/Documents/tradingapp/server/server.js:182:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1940:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '::',
  port: 3000
}

Node.js v20.16.0
